<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="./ui-sdk.js"></script>
</head>
<body>
    <div>check the custom option</div>
    <script>
        const variant = ['42019861037208']
        const productOptionSelected = (appContext, product, productVariant) =>{
            let productVariant = {
                                    "productId": "",
                                    "variantID": "Z2lkOi8vc2hvcGlmeS9Qcm9kdWN0VmFyaWFudC8zOTk5MDQyNTI4ODg5NQ==",
                                    "optional": false,
                                    "isRequired": false,
                                    "variantMessage": "",
                                    "variantTitle": "black / S",
                                    "sellingPrice": 700,
                                    "barcode": "",
                                    "retailPrice": 1000,
                                    "defLangVariantTitle": "",
                                    "availableQuantity": 91,
                                    "variantImageId": "28985655886015",
                                    "sku": "",
                                    "imagesArray": [
                                        "https://cdn.shopify.com/s/files/1/0577/3056/4287/products/bags2.jpg?v=1662359552"
                                    ],
                                    "isStockAvailable": true
                                }
            let variantID = window.atob(productVariant.variantID).split('/').pop()
            if(variant.includes(variantID)){
                
                let randomId = makeid(8)
                VajroSDK.setCodeBlockContent()
                    .setCodeBlockId("overlay_popup")
                    .setContentType("url")
                    .setContentData("https://praveenvajro.github.io/lowcode/ui_context/popup_code.html")
                    .setId(randomId)
                    .setVisibility(true)
                    .exec().then(() => {

                    })
            }
        }

        function makeid(length) {
            var result           = '';
            var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            var charactersLength = characters.length;
            for ( var i = 0; i < length; i++ ) {
                result += characters.charAt(Math.floor(Math.random() * charactersLength));
            }
            return result;
        }

        VajroSDK.subscribe(
                VajroSDK.Triggers.PRODUCT_OPTION_SELECTED,
                productOptionSelected
            );
    </script>
</body>
</html>